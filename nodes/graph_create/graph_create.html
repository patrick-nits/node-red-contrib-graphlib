<script type="text/javascript">
    RED.nodes.registerType('graph_create', {
        category: 'graphlib',
        color: 'rgb( 63, 173, 181)',
        defaults: {
            name: {value: "Create Graph"},
            graph_config: {type: "graph-config", required: true},
            json_output: {value: false},
        },
        inputs: 1,
        outputs: 1,
        icon: "icon.png",
        label: function () {
            return this.name;
        },
        paletteLabel: "Create Graph",
        outputLabels: "Graph object"
    });
</script>

<script type="text/x-red" data-template-name="graph_create">
<div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i>Name</label>
    <input type="text" id="node-input-name" placeholder="Name">
</div>
 <div class="form-row">
        <label for="node-input-graph_config"><i class="fa fa-cogs"></i> Config</label>
        <input type="text" id="node-input-graph_config">
    </div>
</div>
    <div class="form-row">
        <label for="node-input-json_output">&nbsp;</label>
        <input type="checkbox" id="node-input-json_output" style="display:inline-block; width:15px; vertical-align:baseline;">
        <span><i class="fa fa-code"></i> JSON output?</span>
    </div>
</script>



<script type="text/x-red" data-help-name="graph_create">
<h3>Create Graph Node</h3>
<p>This node creates a graph, using <a href="https://github.com/dagrejs/graphlib">dagrejs/graphlib</a>, based on the input message.
    The graph should be in the form of a node and edge list. Configuration via <span class="property-type">graph_config</span>.</p>

<h3>Configuration</h3>
<ol class="node-ports">
    <li> Graph Config
        <dl class="message-properties">
            <dt>graph_config <span class="property-type">obj</span></dt>
            <dd>Defines graph structure.</dd>
        </dl>
    </li>
        <li> JSON output
        <dl class="message-properties">
            <dt>json_output <span class="property-type">true | false </span></dt>
            <dd>Set to true if you want to serialize the output into JSON. If you plan to use nodes from the graphlib package, use false. IF you need the JSON, use true.
             Default false.</dd>
        </dl>
    </li>
</ol>

<h3>Input</h3>
<ol class="node-ports">
    <li> default
        <dl class="message-properties">
            <dt>msg.payload.graph <span class="property-type">JSON | obj</span></dt>
            <dd>JSON or Object representation of the graph. If empty, new graph will be created.</dd>
        </dl>
    </li>
</ol>

<h3>Output</h3>
<ol class="node-ports">
    <li> default
        <dl class="message-properties">
            <dt>payload <span class="property-type">Graphlib graph object</span></dt>
            <dd>original message with graph in msg.payload.graph. Replaces existing graph.</dd>
        </dl>
    </li>
</ol>

</script>
