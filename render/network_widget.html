<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css"/>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>

<div id="mynetwork" style="width:100%; height:100%"></div>
<script type="text/javascript">
    (function (scope) {
        var timer = setInterval(function () {
            if (!window.vis) return;
            clearInterval(timer);
            var buildData = function (nodes, edges) {
                console.log(nodes);
                console.log(edges);
                return {nodes: new vis.DataSet(nodes), edges: new vis.DataSet(edges)};
            };
            var container = document.getElementById('mynetwork');
            var options = {
                configure: true
            };
            var network = new vis.Network(container, {nodes: new vis.DataSet([]), edges: new vis.DataSet([])}, options);
            scope.$watch('msg', function (msg) { //watch for an incoming NR msg
                if (msg) {
                    console.log(msg);
                    var data = buildData(msg.payload.nodes,msg.payload.edges);
                    network.setData(data);
                }
            });
        }, 100);
    })(scope);
</script>